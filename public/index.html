<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
	<title> 0112 売り手 </title>
	<link rel="stylesheet" href="app_shell.css">
</head>
<body>
	<div id="loading-view">
		<p id="loading-text">システム起動中...</p>
	</div>

	<div id="app-shell" style="display:none;">
		<div class="app-header">
			<div style="display: flex;">
			<span id="display-shop-name">--</span>
			（<span id="display-user-name">--</span>）
			</div>
		</div>

		<div id="view-market" class="content-view active-view">
			<div class="sticky-filter-header" style="position:sticky; top:0; z-index:100; background:white; border-bottom:1px solid #ddd;">
				<div id="cat-tabs" class="filter-scroll"></div>
				<div id="sup-tabs" class="filter-scroll" style="border-top: 1px solid #eee;"></div>
			</div>
			
			<div id="inventory-items" style="padding: 10px;">
				<table class="data-table">
					<thead>
						<tr>
							<th>商品名</th>
							<th>単価</th>
							<th>在庫数</th>
						</tr>
					</thead>
					<tbody id="inventory-body"></tbody>
				</table>
			</div>
		</div>

		<div id="view-org-selection" class="content-view" style="display:none; padding: 20px;">
			<div style="text-align:center; margin-bottom:30px;">
				<h2 style="font-size:1.2em; color:#333;">利用する組織を選択</h2>
				<p style="font-size:0.8em; color:#666;">複数の組織に所属しています。</p>
			</div>
			<div id="org-list-container" style="display: flex; flex-direction: column; gap: 16px;">
				</div>
		</div>

		<div id="view-history" class="content-view" style="display:none;">
			<div class="sticky-filter-header" style="position:sticky; top:0; z-index:100; background:white; border-bottom:1px solid #ddd;">
				<div id="history-sup-tabs" class="filter-scroll" style="border-top: 1px solid #eee;"></div>
			</div>
			
			<div id="history-list">
				<table class="data-table">
					<thead>
						<tr>
							<th>状態</th>
							<th>日時</th>
							<th>商品名</th>
							<th>単価</th>
							<th>数量</th>
							<th>金額</th>
						</tr>
					</thead>
					<tbody id="history-body"></tbody>
				</table>
			</div>
		</div>

		<div id="view-settings" class="content-view" style="display:none;">
			<div class="card" style="margin: 16px; background: white; padding: 16px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.08);">
				<p>ログイン中のユーザー: <span id="settings-user-name">--</span></p>
				<p>店舗ID: <span id="settings-shop-id">--</span></p>
				<hr style="border: 0; border-top: 1px solid #eee; margin: 16px 0;">
				<button id="btn-re-link" class="btn-primary" style="width: 100%;">別のIDを連携する</button>
			</div>

			<div class="card" style="margin: 16px; background: white; padding: 16px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.08);">
				<h3 style="margin-top:0; font-size:1.1em; border-bottom:1px solid #eee; padding-bottom:8px;">取引先管理</h3>
				
				<div class="add-supplier-box">
					<input type="text" id="input-supplier-id" placeholder="追加する店舗ID (例: se1001)" class="input-field">
					<button id="btn-add-supplier" class="btn-secondary">追加</button>
				</div>
				<p id="settings-msg" style="font-size:0.8em; color:red; min-height:1.2em;"></p>

				<div id="settings-supplier-list" class="supplier-list-container">
					</div>
			</div>
		</div>

		<div class="bottom-nav">
			<div class="nav-item" id="nav-market">🛒市場</div>
			<div class="nav-item" id="nav-history">📋履歴</div>
			<div class="nav-item" id="nav-settings">⚙️設定</div>
		</div>
	</div>

	<div id="order-panel" class="modal-overlay" style="display:none;">
		<div class="modal-content">
			<h3 id="selected-product-name" class="order-product-name">--</h3>
			<div class="qty-display"><span id="current-qty">1</span></div>
			<div id="total-price" class="order-total">合計: ¥0</div>
			<div class="qty-controls">
				<button class="qty-btn" data-action="adjust" data-value="-10">-10</button>
				<button class="qty-btn" data-action="adjust" data-value="-1">-1</button>
				<button class="qty-btn" data-action="adjust" data-value="1">+1</button>
				<button class="qty-btn" data-action="adjust" data-value="10">+10</button>
			</div>
			<hr style="margin:15px 0; border:0; border-top:1px solid #eee;">				
			<button data-action="submit" class="btn-order-submit">注文する</button>
			<button data-action="close" class="btn-link">キャンセル</button>
		</div>
	</div>

	<div id="history-detail-panel" class="modal-overlay" style="display:none;">
		<div class="modal-content">
			<h3 id="detail-product-name" class="modal-title">商品詳細</h3>
			<div id="detail-content">
				<div class="detail-row"><span>状態</span><span id="detail-status">--</span></div>
				<div class="detail-row"><span>日時</span><span id="detail-time">--</span></div>
				<div class="detail-row"><span>単価</span><span id="detail-price">--</span></div>
				<div class="detail-row"><span>数量</span><span id="detail-qty">--</span></div>
				<div class="detail-row total"><span>合計金額</span><span id="detail-total">--</span></div>
				<div class="detail-id-label">ID: <span id="detail-id">--</span></div>
			</div>
			<div id="detail-actions"></div>		
			<button id="close-detail-btn" data-action="close" class="btn-close">閉じる</button>
		</div>
	</div>

	<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
	<script type="module" src="index.js"></script>
</body>
</html>

